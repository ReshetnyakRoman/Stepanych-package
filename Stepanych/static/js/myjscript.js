function drag(e,t){t.dataTransfer.setData("text",t.target.id),teamlist.teamName[counterx]=$(e).find("span.teamName").text(),teamlist.set[counterx]=$(e).find("span.setNuber").text()}function allowDrop(e){e.preventDefault()}function drop(e,t){e.preventDefault();var l=e.dataTransfer.getData("text");e.target.appendChild(document.getElementById(l)),teamlist.set[counterx]=t,counterx+=1}function publish(e,t){myJSON=JSON.stringify(teamlist),$.ajax({url:"/competition/registredteams/update",type:"POST",data:myJSON,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){location.reload(!0)},error:function(){alert("Error")}})}function save_team_change(){myJSON=JSON.stringify(teamlist),$.ajax({url:"/competition//registredteams/save_update",type:"POST",data:myJSON,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){location.reload(!0)},error:function(){alert("Error")}})}function highlightFinals(e){myJSON=JSON.stringify({highlight:e}),$.ajax({url:"/competition/results/highlight",type:"POST",data:myJSON,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){location.reload(!0)},error:function(){display("Error")}})}function display(e){$("mytest").html(e)}function unpublish(e,t){$.post("/competition/registredteams/unpublish",{status:"closed"},function(e,t){"success"==t&&location.reload(!0)})}function randomizeItems(e){for(var t,l,a=e.slice(0),n=a.length;--n;)t=a[l=Math.floor(n*Math.random())],a[l]=a[n],a[n]=t;return a}function randomizeList(){for(var e=$("#numberOfSets").text(),t=1;t<=e;){var l=document.getElementById("setul"+t);$(l).children().eq(0).remove();var a=l.children,n=0;for(a=randomizeItems(a=Array.prototype.slice.call(a));n<a.length;)l.appendChild(a[n]),++n;t++,$('<li draggable="true" ondragstart="drag(event)" class="helpingLi"><div class="w3-border-bottom w3-border-blue w3-padding"><div id="header" class="w3-row w3-margin-bottom"><div class="w3-col s12" ><span class="w3-small w3-text-grey">Перетащите сюда команды, которые вы хотите добавить в этот сет</span></div></div></li>').prependTo(l),l.style.display="block"}}function edit_user_info(e){var t=e.parentElement.getElementsByTagName("input"),l=e.parentElement.getElementsByTagName("select"),a=e.parentElement.getElementsByTagName("button");for(i=0;i<t.length;i++)t[i].disabled=t[i].remove.disabled;for(i=0;i<l.length;i++)l[i].disabled=l[i].remove.disabled;e.className=e.className.replace(" w3-show-inline-block"," w3-hide"),a[1].className=a[1].className.replace(" w3-hide"," w3-show-inline-block"),t[0].autofocus=t[0].focus()}function save_user_info(e){var t=e.parentElement.getElementsByTagName("input"),l=e.parentElement.getElementsByTagName("select"),a=e.parentElement.getElementsByTagName("button");for(i=0;i<t.length;i++)t[i].setAttribute("disabled","");for(i=0;i<l.length;i++)l[i].setAttribute("disabled","");e.className=e.className.replace(" w3-show-inline-block"," w3-hide"),a[0].className=a[0].className.replace(" w3-hide"," w3-show-inline-block"),teamID="#"+$(e).parent().parent().attr("id"),TeamCompetition=$(teamID+" span.teamName").text()+$(teamID+" p.competition").text(),name1x=$(teamID+" input.name1").val(),sname1x=$(teamID+" input.sname1").val(),year1x=$(teamID+" input.year1").val(),club1x=$(teamID+" input.club1").val(),male1x=$(teamID+" select.male1").val(),alpSkill1x=$(teamID+" select.alpSkill1").val(),climbSkill1x=$(teamID+" select.climbSkill1").val(),name2x=$(teamID+" input.name2").val(),sname2x=$(teamID+" input.sname2").val(),year2x=$(teamID+" input.year2").val(),club2x=$(teamID+" input.club2").val(),male2x=$(teamID+" select.male2").val(),alpSkill2x=$(teamID+" select.alpSkill2").val(),climbSkill2x=$(teamID+" select.climbSkill2").val();var n={name1:name1x,sname1:sname1x,club1:club1x,year1:year1x,male1:male1x,alpSkill1:alpSkill1x,climbSkill1:climbSkill1x,name2:name2x,sname2:sname2x,year2:year2x,club2:club2x,male2:male2x,alpSkill2:alpSkill2x,climbSkill2:climbSkill2x,keyTeamCompetition:TeamCompetition};$.post("/competition/allteams/change",n,alert("Данные сохранены"))}function assign_id(e){e.parentElement.setAttribute("id","delete")}function delete_element_modal(e){document.getElementById(e).style.display="none";var t=$("li#delete span.teamName").text()+$("li#delete p.competition").text();$.get("/competition/allteams/delete/"+t);var l=document.getElementById("delete").parentElement,a=document.getElementById("delete");l.removeChild(a)}function delete_archive_modal(e){document.getElementById(e).style.display="none";var t=$("div#delete p.competitionName").text();$.post("/competition/admin/delete-archive",{competitionName:t});var l=document.getElementById("delete").parentElement,a=document.getElementById("delete");l.removeChild(a)}function delete_team_modal(e){document.getElementById(e).style.display="none";var t=$("li#delete span.teamName").text()+$("#competition").text();$.get("/competition/allteams/delete/"+t);var l=document.getElementById("delete").parentElement,a=document.getElementById("delete");l.removeChild(a)}function delete_user_modal(e){document.getElementById(e).style.display="none";var t=$("li#delete div.name").text()+$("li#delete div.sname").text()+$("li#delete div.year").text();$.post("/competition/allmembers/delete",{keyNameSnameYear:t});var l=document.getElementById("delete").parentElement,a=document.getElementById("delete");l.removeChild(a)}function delete_element(){var e=document.getElementById("delete").parentElement,t=document.getElementById("delete");e.removeChild(t)}function delete_doc(){docName=$("#delete div.name").text(),$.post("/site/docs/delete",{name:docName});var e=document.getElementById("delete").parentElement,t=document.getElementById("delete");e.removeChild(t)}function delete_rules(e){$.post("/info/rules/delete",{nameRus:e});var t=document.getElementById("delete").parentElement,l=document.getElementById("delete");t.removeChild(l)}function delete_contact(e){$.post("/contacts/delete",{fullName:e});var t=document.getElementById("delete").parentElement,l=document.getElementById("delete");t.removeChild(l)}function delete_article(e){$.post("/media/press/delete",{url:e});var t=document.getElementById("delete").parentElement,l=document.getElementById("delete");t.removeChild(l)}function delete_video(e){$.post("/media/video/delete",{description:e});var t=document.getElementById("delete").parentElement,l=document.getElementById("delete");t.removeChild(l)}function delete_sponsor(e){$.post("/info/sponsors/delete",{sponsorName:e});var t=document.getElementById("delete").parentElement,l=document.getElementById("delete");t.removeChild(l)}function delete_gallery(e){$.post("/media/photo/delete",{galleryID:e});var t=document.getElementById("delete").parentElement,l=document.getElementById("delete");t.removeChild(l)}function delete_photo(e,t){$.post("/media/photo/delete_photo",{photoID:t}),$(e).parent().remove(),$(".photo"+t).remove(),setTimeout(function(){xxx._closeSlideshow(),xxx=new CBPGridGallery(document.getElementById("grid-gallery"))},35)}function delete_post_photo(e,t){$.post("/news/edit/delete_post_photo",{photoID:t}),$(e).parent().remove(),$(".photo"+t).remove(),setTimeout(function(){yyy._closeSlideshow(),yyy=new CBPGridGallery(document.getElementById("grid-gallery"))},35)}function hide_slideshow(){$("#grid-gallery").removeClass(".slideshow-open"),$(".slideshow li.show").removeClass(".show"),$(".slideshow li.current").removeClass(".current")}function delete_route(){routeNuber1=$("#delete div.routeNuber").text(),$.post("/competition/routes/delete",{routeNuber:routeNuber1});var e=document.getElementById("delete").parentElement,t=document.getElementById("delete");e.removeChild(t)}function delete_logo(e,t){$.post("/site/admin/delete_logo",{logoID:t}),$(e).parent().remove()}function make_logo_active(e){$.post("/site/admin/make_logo_active",{logoID:e},function(){location.reload(!0)})}function check_icon(e){$("#add_page .fa-check-circle").hide(),$(e).children("i.fa-check-circle").show()}function delete_page(e,t){$.post("/site/admin/delete_page",{pageID:t}),$(e).parent().remove()}function get_route_info(e){$.get("/competition/routes/info/"+e,function(e,t){$("#routeName1").text("Трасса №"+e.routeNuber+' "'+e.name+'"'),$("#routeNuber1").val(e.routeNuber),$("#routeNuber1").attr("type","hidden"),$("#routeIMG").attr("src",e.picURL)})}function myselect(e){$("select").css("border","red solid 1px")}function openTab(e,t){var l,a,n;for(a=document.getElementsByClassName("teamlist"),l=0;l<a.length;l++)a[l].style.display="none";for(n=document.getElementsByClassName("tablink"),l=0;l<a.length;l++)n[l].className=n[l].className.replace(" w3-border-blue",""),n[l].className=n[l].className.replace(" w3-blue-l4",""),n[l].className=n[l].className+=" w3-text-grey";document.getElementById(t).style.display="block",e.currentTarget.firstElementChild.className+=" w3-border-blue",e.currentTarget.firstElementChild.className+=" w3-blue-l4"}function toogle(e,t,l){$("#"+t).hide("slow"),$("#"+e).show("slow"),$(".tablink").removeClass("w3-border-blue w3-blue-l4"),$(".tablink").addClass(" w3-text-grey"),$("#"+l).addClass("w3-border-blue w3-blue-l4")}function myFilter(e){var t,l,a,n,o;for(t=document.getElementsByClassName("input-filter")[e].value.toUpperCase(),l=document.getElementsByClassName("ul-filter"),o=0;o<l.length;o++)for(a=l[o].getElementsByTagName("li"),n=0;n<a.length;n++)a[n].innerHTML.toUpperCase().indexOf(t)>-1?a[n].style.display="":a[n].style.display="none"}function tableFilter(e,t){var l,a,n,t;for(l=document.getElementsByClassName("input-filter")[e].value.toUpperCase(),a=document.getElementsByTagName("table")[t].getElementsByTagName("tr"),n=3;n<a.length;n++)a[n].innerHTML.toUpperCase().indexOf(l)>-1?a[n].style.display="":a[n].style.display="none"}function blocks(e){var t=document.getElementById(e);-1==t.className.indexOf("w3-show")?t.className+=" w3-show":t.className=t.className.replace(" w3-show","")}function comanddelete(){this.parentElement.style.display="none"}function SaveAndRandom(){}function change_user(e,t,l,a,n,o,s,m,i,d){var e,c,r;e.className=e.className.replace(" w3-show"," w3-hide"),(c=document.getElementById(d)).className=c.className.replace(" w3-hide"," w3-show"),(r=document.getElementById(i)).className=r.className.replace(" w3-show"," w3-hide"),document.getElementById(t).disabled=document.getElementById(t).remove.disabled,document.getElementById(t).autofocus=document.getElementById(t).focus(),document.getElementById(l).disabled=document.getElementById(l).remove.disabled,document.getElementById(a).disabled=document.getElementById(a).remove.disabled,document.getElementById(n).disabled=document.getElementById(n).remove.disabled,document.getElementById(o).disabled=document.getElementById(o).remove.disabled,document.getElementById(s).disabled=document.getElementById(s).remove.disabled,document.getElementById(m).disabled=document.getElementById(m).remove.disabled}function save_change_user(e,t,l,a,n,o,s,m,i){document.getElementById(t).disabled=document.getElementById(t).remove.disabled,document.getElementById(l).disabled=document.getElementById(l).remove.disabled,document.getElementById(a).disabled=document.getElementById(a).remove.disabled,document.getElementById(n).disabled=document.getElementById(n).remove.disabled,document.getElementById(o).disabled=document.getElementById(o).remove.disabled,document.getElementById(s).disabled=document.getElementById(s).remove.disabled,document.getElementById(m).disabled=document.getElementById(m).remove.disabled,document.getElementById(i).submit(),e.className=e.className.replace(" w3-show"," w3-hide")}function open_competition(e,t){e.className=e.className.replace(" w3-show"," w3-hide");var l=document.getElementById(t);l.className=l.className.replace(" w3-hide"," w3-show");var a=document.getElementById("controls");a.className=a.className.replace(" w3-disabled",""),a.setAttribute("disabled",""),document.getElementById("controls_tooltip").className=document.getElementById("controls_tooltip").className.replace("my-tooltip-text-2"," w3-hide")}function close_competition(e,t){e.className=e.className.replace(" w3-show"," w3-hide");var l=document.getElementById(t);l.className=l.className.replace(" w3-hide"," w3-show");var a=document.getElementById("controls");a.className+=" w3-disabled",a.setAttribute("disabled","disabled"),document.getElementById("controls_tooltip").className=document.getElementById("controls_tooltip").className.replace(" w3-hide"," my-tooltip-text-2");var o=document.getElementsByTagName("input");for(n=1;n<o.length;n++)o[n].className=o[n].className.replace(" w3-show"," w3-hide");document.getElementById("set_description").className=document.getElementById("set_description").className.replace(" w3-show"," w3-hide"),document.getElementById("number_of_sets").value="0"}function set_description(){var e=document.getElementById("number_of_sets").value,t=document.getElementsByClassName("input-filter");for(n=0;n<t.length;n++)t[n].className=t[n].className.replace(" w3-show"," w3-hide");for(i=0;i<=e;i++)t[i].className=t[i].className.replace(" w3-hide"," w3-show");t[0].autofocus=t[0].focus(),document.getElementById("set_description").className=document.getElementById("set_description").className.replace(" w3-hide"," w3-show")}function open_registration(e,t){if(-1==e.className.indexOf("w3-disabled")){e.className=e.className.replace(" w3-show"," w3-hide");var l=document.getElementById(t);l.className=l.className.replace(" w3-hide"," w3-show")}}function close_registration(e,t){e.className=e.className.replace(" w3-show"," w3-hide");var l=document.getElementById(t);l.className=l.className.replace(" w3-hide"," w3-show")}function open_routes(e,t){e.className=e.className.replace(" w3-show"," w3-grayscale");var l=document.getElementById(t);l.className=l.className.replace(" w3-hide"," w3-show")}function close_routes(e,t){e.className=e.className.replace(" w3-show"," w3-hide");var l=document.getElementById(t);l.className=l.className.replace(" w3-hide"," w3-show")}function edit_results(e){$(e).parent().parent().attr("id","change");var t=e.parentElement.parentElement.getElementsByTagName("input"),l=e.parentElement.parentElement.getElementsByTagName("select"),a=e.parentElement.parentElement.getElementsByTagName("button");for(i=0;i<t.length;i++)t[i].disabled=t[i].remove.disabled;for(i=0;i<l.length;i++)l[i].disabled=l[i].remove.disabled;e.className=e.className.replace(" w3-show-inline-block"," w3-hide"),a[1].className=a[1].className.replace(" w3-hide"," w3-show-inline-block"),t[0].autofocus=t[0].focus()}function save_results(e){var t=e.parentElement.parentElement.getElementsByTagName("input"),l=e.parentElement.parentElement.getElementsByTagName("select"),a=e.parentElement.parentElement.getElementsByTagName("button");for(i=0;i<t.length;i++)t[i].setAttribute("disabled","");for(i=0;i<l.length;i++)l[i].setAttribute("disabled","");for(e.className=e.className.replace(" w3-show-inline-block"," w3-hide"),a[0].className=a[0].className.replace(" w3-hide"," w3-show-inline-block"),teamID="#"+$(e).parent().parent().attr("id"),routes=$(teamID+" td.routes"),team={competition:$("#competition").text(),teamName:$(teamID+" span.teamName").text(),routeScoreFinal:$(teamID+" input.routeScoreFinal").val(),teamStatus:$(teamID+" select.teamStatus").val()},i=0;i<routes.length;i++)routeNuber=routes.eq(i).find("span.routeNuber").text(),team["routeTimeSec"+routeNuber]=60*routes.eq(i).find("input.min").val()+1*routes.eq(i).find("input.sec").val();myJSON=JSON.stringify(team),$.ajax({url:"/competition/results/update",type:"POST",data:myJSON,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){alert("Изаенения сохранены")},error:function(){alert("Ошибка")}}),$(e).parent().parent().removeAttr("id")}function save_and_refresh(){}function downloadxls(){}$(document).ready(function(){$().on("click",function(e){if(""!==this.hash){e.preventDefault();var t=this.hash;$("html, body").animate({scrollTop:$(t).offset().top},900,function(){window.location.hash=t})}}),$(window).scroll(function(){$(".slideanim").each(function(){$(this).offset().top<$(window).scrollTop()+600&&$(this).addClass("slide")})});var e,t;for(t=$(".disable-option"),e=0;e<t.length;e++)t.eq(e).children().first().attr("disabled","disabled");$(".button-upload").on("click",function(){$("#loader_section").show()}),$("#pic-upload").click(function(){$("#loader_section").show()}),$("#loader_section").bind("ajaxSend",function(){$(this).show()}).bind("ajaxStop",function(){$(this).hide()}).bind("ajaxError",function(){$(this).hide()})}),teamlist={teamName:[],set:[]},counterx=0;var del;