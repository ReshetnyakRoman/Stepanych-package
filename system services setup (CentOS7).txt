
sudo netstat -plntu - проверка запущенных демонов, на каких портах они слушают и на каких ip

запусл nginx в ручную
sudo nginx -t проверка конфиг файла
sudo nginx запуск
sudo nginx -s stop  - остановка

Добавление ползльзователя для почты:
$ sudo useradd -m john -s /sbin/nologin
$ sudo passwd john

Управление службами systemctl:
sudo systemctl start nginx / mysql / flask-uwsgi / postfix / dovecot
sudo systemctl stop nginx
sudo systemctl restart nginx
sudo systemctl status nginx
systemctl halt – останавливает систему
systemctl poweroff – выключает систему
systemctl reboot – перезагружает систему
systemctl daemon-reload - перезагрузка всех серверов

=======Добавление сервиса в автозагрузку======
Find out the name of service’s script from /etc/init.d/ directory e.g. mysqld or httpd
Add it to chkconfig
sudo /sbin/chkconfig --add mysqld
Make sure it is in the chkconfig.
sudo /sbin/chkconfig --list mysqld
Set it to autostart
sudo /sbin/chkconfig mysqld on

sudo /sbin/chkconfig mysqld off  - выключение сервиса из автозагрузки (аналогичная команда systemctl disable httpd)
sudo /sbin/chkconfig mysqld on  - включение сервиса в атозагрузку  (аналогичная команда sudo systemctl enable nginx)
==================================

Для зауска службы в автозагрузке, нужно сздать служебный файл по адресу /usr/lib/systemd/system/
Файл запуска службы nginx выглядит так (/usr/lib/systemd/system/nginx.service):

[Unit]
Description=The nginx HTTP and reverse proxy server
#After=network.target remote-fs.target nss-lookup.target
After=network-online.target remote-fs.target nss-lookup.target
Wants=network-online.target

[Service]
Type=forking
PIDFile=/var/run/nginx.pid
# Nginx will fail to start if /run/nginx.pid already exists but has the wrong
# SELinux context. This might happen when running `nginx -t` from the cmdline.
# https://bugzilla.redhat.com/show_bug.cgi?id=1268621
ExecStartPre=/usr/bin/rm -f /run/nginx.pid
ExecStartPre=/usr/bin/sleep 20
ExecStartPre=/usr/sbin/nginx -t
ExecStart=/usr/sbin/nginx
ExecReload=/bin/kill -s HUP $MAINPID
KillSignal=SIGQUIT
TimeoutStopSec=5
KillMode=process
PrivateTmp=false

[Install]
WantedBy=multi-user.target


Файл запуска службы uwsgi выглядит так (/usr/lib/systemd/system/flask-uwsgi.service):

[Unit]
Description=uWSGI instance to serve flask-uwsgi project
After=network.target

[Service]
User=nginx
Group=nginx
WorkingDirectory=/home/flask
Environment="PATH=/home/flask/venv-pyth3/bin"
ExecStart=/home/flask/venv-pyth3/bin/uwsgi --ini uwsgi.ini

[Install]
WantedBy=multi-user.target


Файл запуска службы uwsgi /usr/lib/systemd/system/mysqld.service:

==================================



запуск mysql server:

sudo systemctl start mysqld

проверка статуса запущенного демона mysqld:

sudo systemctl status mysqld

sudo systemctl disable mysqld - отменяет автозапуск при перезагрузке

mysqladmin -u root -p version - информация об установленной версии











